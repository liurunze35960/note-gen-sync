## 一、 图的概念 (Concept of a Graph)

### 1. 定义

图 (Graph) 是一种非线性的数据结构，由**顶点 (Vertex)** 的有穷非空集合和**边 (Edge)** 的集合组成。 它可以用来表示数据对象之间的多对多关系。

其形式化定义为：

$$Graph = (V, R) $$ 其中： 
* **$V$ (Vertex Set)**：代表数据对象的有穷非空集合。 
* **$R$ (Relation Set)**：代表顶点之间关系（即边）的有穷集合。 
### 2\. 图的类型 
#### a) 无向图 (Undirected Graph) 
在图 $G$ 中，如果所有的边都没有方向性，则称 $G$ 为无向图。边使用**无序对** $(v_i, v_j)$ 表示，代表 $v_i$ 和 $v_j$ 之间有一条双向的边。 
**示例：** 对于图 $G1$： 
* 顶点集 $V1 = {v_1, v_2, v_3, v_4, v_5}$ 
* 边集 $R1 = {(v_1, v_2), (v_1, v_4), (v_2, v_3), (v_2, v_5), (v_3, v_4), (v_3, v_5)}$ 
#### b) 有向图 (Directed Graph) 
在图 $G$ 中，如果所有的边都有明确的方向，则称 $G$ 为有向图。
边也称为**弧 (Arc)**，使用**有序对** $<v_i, v_j>$ 表示，代表一条从顶点 $v_i$（称为**弧尾**或**起点**）指向顶点 $v_j$（称为**弧头**或**终点**）的边。 
#### c) 完全图 (Complete Graph) 
在一个有 $n$ 个顶点的图中： 
* **无向完全图**：如果图中任意两个顶点之间都存在一条边，总边数为 $\frac{n(n-1)}{2}$，则称其为无向完全图。 
* **有向完全图**：如果图中任意两个顶点之间都存在方向相反的两条弧，总边数为 $n(n-1)$，则称其为有向完全图。 

--- 
## 二、图的应用举例 (Applications of Graphs) 
图在现实世界中有广泛的应用，以下是一些经典问题： 
1. **网络优化问题 (最小生成树)** 
	* **问题描述**：在多个城市间修建公路，使得任意两个城市都能连通，且总修建成本最低。 
	* **图模型**：将城市看作顶点，城市间的修建成本看作带权的边，问题转化为求解图的**最小生成树 (Minimum Spanning Tree, MST)**。
2. **最短路径问题 (Shortest Path Problem)** 
	* **问题描述**：在复杂的公路网中，找到从甲地到乙地的最短行车路线。 
	* **图模型**：将地点看作顶点，道路看作边，道路长度或行驶时间看作边的权重，问题转化为在图中寻找两个顶点之间的**最短路径**。 
3. **工程计划与评审技术 (PERT) / 关键路径法 (CPM)** 
	* **问题描述**：大型工程项目包含多个有先后顺序的子项目，如何确定项目的最早完工时间。 
	* **图模型**：用有向图表示项目流程，顶点表示事件（里程碑），有向边（弧）表示活动（子项目），弧的权重表示活动持续时间。项目总工期取决于从起点到终点的**最长路径**，这条路径被称为**关键路径 (Critical Path)**。 
4. **旅行商问题 (Traveling Salesman Problem, TSP)** 
	* **问题描述**：一个推销员需要访问多个城市，要求每个城市只访问一次，最后回到出发地，如何规划路线使得总路程最短。 
	* **图模型**：这是一个经典的组合优化问题，在图论中寻求一个包含所有顶点的、总权重最小的**哈密顿回路**。 
---
## 三、图的基本术语 (Basic Terminology) 
4. **邻接与关联** 
	* 若 $(v_i, v_j)$ 是一条无向边，则称顶点 $v_i$ 和 $v_j$ 互为**邻接点**。称该边 $(v_i, v_j)$ **关联**于顶点 $v_i$ 和 $v_j$。 
5. **度 (Degree)** 
	* **度** ($TD(v)$)：对于无向图，与顶点 $v$ 相关联的边的数目。 
	* **入度** ($ID(v)$)：对于有向图，以顶点 $v$ 为终点（弧头）的边的数目。 
	* **出度** ($OD(v)$)：对于有向图，以顶点 $v$ 为始点（弧尾）的边的数目。 
	* **定理**：对于任何图，所有顶点的度数之和等于总边数的两倍。
$$\sum_{i=1}^{n} TD(v_i) = 2e
$$
对于有向图，所有顶点的入度之和等于出度之和，都等于边数 $e$。

3. **子图 (Subgraph)**
    
    - 设有图 G=(V,E) 和 G′=(V′,E′)，若 $V′\subseteq V$ 且 $E′\subseteq E$，则称 G′ 是 G 的一个子图。

4. **路径 (Path) 与 回路 (Cycle)**
    
    - **路径**：从顶点 v_i 到 v_j 的一个顶点序列，序列中相邻的两个顶点之间在图中都有边。
        
    - **简单路径**：路径上除了起点和终点可能相同外，其余顶点均不重复的路径。
        
    - **回路/环**：起点和终点相同的简单路径。
        
5. **连通性 (Connectivity)**
    
    - **连通图 (Connected Graph)**：在**无向图**中，若对任意两个顶点都存在路径，则称该图为连通图。
        
    - **连通分量 (Connected Component)**：无向图的**极大连通子图**。 “极大”意味着该子图是连通的，且加入原图中任何其他顶点后就不再连通。
        
    - **强连通图 (Strongly Connected Graph)**：在**有向图**中，若对任意两个顶点 v_i 和 v_j，都同时存在从 v_i 到 v_j 和从 v_j 到 v_i 的路径，则称该图为强连通图。
        
    - **强连通分量 (Strongly Connected Component)**：有向图的**极大强连通子图**。
        
    
    > **补充知识**：一个包含 n 个顶点的图，要保证连通性：
    
    > - 对于**无向图**，至少需要 n−1 条边（构成一棵树）。
    >     
    > - 对于**强连通图**，至少需要 n 条边（构成一个环）。
    >     
    
6. **生成树 (Spanning Tree)**
    
    - 一个连通图的**极小连通子图**，它包含原图的所有顶点，但只用最少的边来保持图的连通性。 “极小”意味着移除任何一条边都会导致该子图不再连通。
        
    - 生成树是一个无环的连通子图，恰好有 n 个顶点和 n−1 条边。
        

## 四、 图的存储结构 (Storage Structures)

图的存储结构需要保存两类信息：**顶点的数据**和**顶点间的关系（边）**。

### 1. 邻接矩阵 (Adjacency Matrix)

使用一个一维数组存储顶点信息，一个二维数组（矩阵）存储边信息。

- **定义**：对于有 n 个顶点的图，创建一个 ntimesn 的矩阵 A。
    
    - 对于**无权图**：
        
        $$A[i][j] = \begin{cases} 1, & \text{if } (v_i, v_j) \text{ is an edge} \\ 0, & \text{otherwise} \end{cases}
        
        $$
        
    - 对于**带权图**：
        
        $$A[i][j] = \begin{cases} w_{ij}, & \text{if } (v_i, v_j) \text{ is an edge with weight } w_{ij} \\ \infty, & \text{if there is no edge} \\ 0, & \text{if } i = j \end{cases}
        
        $$
        
- **特点**：
    
    - 无向图的邻接矩阵是**对称**的。
        
    - 判断两个顶点是否邻接非常快，时间复杂度为 O(1)。
        
    - 获取一个顶点的度（对于无向图）或出度（对于有向图）需要遍历一行，时间复杂度为 O(n)。 获取入度则需遍历一列。
        
    - 空间复杂度为 O(n2)，适用于**稠密图**（边数接近 n2）。
        

### 2. 邻接表 (Adjacency List)

邻接表是图的一种链式存储结构。

- **定义**：为图中的每个顶点建立一个单链表。顶点存储在数组中，该数组的每个元素对应一个顶点的单链表的头指针。 第 i 个单链表中的节点表示所有与顶点 v_i 相邻接的顶点。
    
- **特点**：
    
    - 对于无向图，每条边会在两个顶点的链表中各出现一次。 空间复杂度为 O(n+2e)。 对于有向图，空间复杂度为 O(n+e)。
        
    - 适用于**稀疏图**（边数远小于 n2），可以有效节省存储空间。
        
    - 计算顶点的度（无向图）或出度（有向图）只需遍历其对应的链表，时间复杂度与其度数成正比。
        
    - 判断两顶点是否邻接需要遍历其中一个顶点的链表。
        

### C/C++ 结构体定义示例

#### 邻接矩阵

```c
#define MAX_VERTEX_NUM 20 // 最大顶点数
#define INFINITY 32767   // 代表无穷大

// 图的类型：有向图，有向网，无向图，无向网
typedef enum {DG, DN, UDG, UDN} GraphKind;

// 邻接矩阵中边的信息
typedef struct ArcNode {
    int adj; // 对于无权图，用1/0表示是否邻接；对于带权图，为权值
    // OtherInfo info; // 可选：边的其他信息
} ArcNode;

// 邻接矩阵结构体
typedef struct {
    char vertex[MAX_VERTEX_NUM]; // 顶点信息数组
    ArcNode arcs[MAX_VERTEX_NUM][MAX_VERTEX_NUM]; // 邻接矩阵
    int vexnum, arcnum; // 当前顶点数和边数
    GraphKind kind; // 图的种类
} AdjMatrix;
```

#### 邻接表

```c
#define MAX_VERTEX_NUM 20

// 边表节点
typedef struct ArcNode {
    int adjvex; // 该弧所指向的顶点的位置
    struct ArcNode *nextarc; // 指向下一条弧的指针
    // OtherInfo info; // 可选：边的权值等信息
} ArcNode;

// 顶点表节点
typedef struct VertexNode {
    char data; // 顶点信息
    ArcNode *firstarc; // 指向第一条依附该顶点的弧的指针
} VertexNode;

// 邻接表结构体
typedef struct {
    VertexNode vertex[MAX_VERTEX_NUM]; // 顶点数组
    int vexnum, arcnum; // 当前顶点数和弧数
    GraphKind kind; // 图的种类
} AdjList;
```

## 五、 本讲小结

- **重点**：
    
    1. **图的概念**：理解图作为一种表示多对多关系的数据结构。
        
    2. **图的基本术语**：熟练掌握度、路径、连通性、生成树等核心术语的定义。
        
- **难点**：
    
    1. **图的存储**：理解邻接矩阵和邻接表两种存储方式的原理、实现及优缺点，并能根据问题场景选择合适的存储结构。